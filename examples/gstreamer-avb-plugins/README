Files: Find the plugin code in src directory under gst-plugin folder.

1.gstavbsink_talker.c
2.gstavbsink_talker.h
3.gstavbsrc_listener.c
4.gstavbsrc_listener.h

To Compile the plugin:

1.Install autoconf tool.
  zypper in autoconf

2. Install libtool

  zypper in libtool

Prerequisites:

igb driver must be installed.
mrpd must be running.
gptp must be running.

Build the igb library:
Go to folder: cd /Open-AVB-master/lib/igb

make

Building plugins:

In a weston terminal use following command to compile the plugin:

Listener Side:

Go to folder: cd /Open-AVB-master/examples/gstreamer-avb-plugins/gst-plugin/src 
and in Makefile.am file set

libgstplugin_la_SOURCES = gstavbsrc_listener.c gstavbsrc_listener.h ../../../common/avbtp.c ../../../common/avbtp.h ../../../../lib/igb/igb.h



Talker Side:

Go to folder: cd /Open-AVB-master/examples/gstreamer-avb-plugins/gst-plugin/src
and in Makefile.am file set

libgstplugin_la_SOURCES = gstavbsink_talker.c gstavbsink_talker.h ../../../common/avbtp.c ../../../common/avbtp.h ../../../../lib/igb/igb.h


To test the plugins:

Listener Side:
Go to folder: cd /Open-AVB-master/examples/gstreamer-avb-plugins/gst-plugin/ and type following commands in a weston terminal:


LDFLAGS='-L/Open-AVB-master/lib/igb' CPPFLAGS='-I/Open-AVB-master/lib/igb' LIBS='-ligb -lpci -lrt -lpthread -lm' ./configure

LDFLAGS='-L/Open-AVB-master/lib/igb' CPPFLAGS='-I/Open-AVB-master/lib/igb' LIBS='-ligb -lpci -lrt -lpthread -lm' ./autogen.sh

make

export GST_PLUGIN_PATH=/Open-AVB-master/examples/gstreamer-avb-plugins/gst-plugin/src/.libs

Check weather gstreamer has installed the plugin or not:
gst-inspect-1.0 avbsrc


Talker Side:
Go to folder: cd /Open-AVB-master/examples/gstreamer-avb-plugins/gst-plugin/ and type following commands in a weston terminal:

LDFLAGS='-L/Open-AVB-master/lib/igb' CPPFLAGS='-I/Open-AVB-master/lib/igb' LIBS='-ligb -lpci -lrt -lpthread -lm' ./configure

LDFLAGS='-L/Open-AVB-master/lib/igb' CPPFLAGS='-I/Open-AVB-master/lib/igb' LIBS='-ligb -lpci -lrt -lpthread -lm' ./autogen.sh

make

export GST_PLUGIN_PATH=/Open-AVB-master/examples/gstreamer-avb-plugins/gst-plugin/src/.libs

Check weather gstreamer has installed the plugin or not:
gst-inspect-1.0 avbsink


To launch commands using gst-launch:

After following above steps 

For WEBCAM:

Listener Side:

 
  gst-launch-1.0 avbsrc interface=<Interface Name> dataSync=1 mediaType=0 fd=0 ! decodebin ! autovideosink
  
  Ex: gst-launch-1.0 avbsrc interface=eth3 dataSync=1 mediaType=0 fd=0 ! decodebin ! autovideosink 


Talker Side:

Check weather gstreamer has installed the plugin or not:
gst-inspect-1.0 avbsink

To launch commands using gst-launch:

  gst-launch-1.0 v4l2src ! queue ! avenc_mpeg4 ! queue ! avbsink interface=<Interface Name> fd=0
  
  Ex: gst-launch-1.0 v4l2src ! queue ! avenc_mpeg4 ! queue ! avbsink interface=eth3 fd=0


For Stream Input:

Listener Side:

Check weather gstreamer has installed the plugin or not:
gst-inspect-1.0 avbsrc

To launch commands using gst-launch:
 
  gst-launch-1.0 avbsrc interface=<Interface Name> dataSync=1 mediaType=0 fd=0 ! queue ! qtdemux name=mux mux.video_0 ! queue ! avdec_h264 ! autovideosink mux.audio_0 ! queue ! decodebin ! autoaudiosink
  
  Ex: gst-launch-1.0 avbsrc interface=eth3 dataSync=1 mediaType=0 fd=0 ! queue ! qtdemux name=mux mux.video_0 ! queue ! avdec_h264 ! autovideosink mux.audio_0 ! queue ! decodebin ! autoaudiosink 


Talker Side:

Check weather gstreamer has installed the plugin or not:
gst-inspect-1.0 avbsink

To launch commands using gst-launch:

  gst-launch-1.0 filesrc location=<Input File Path> ! queue ! avbsink interface=<Interface Name> fd=0
  
  Ex: gst-launch-1.0 filesrc location=/home/vinay/input.mp4 ! queue ! avbsink interface=eth3 fd=0
  
  
	
	
	

